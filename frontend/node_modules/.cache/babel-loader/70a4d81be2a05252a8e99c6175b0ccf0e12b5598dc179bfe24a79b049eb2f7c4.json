{"ast":null,"code":"import toast from 'react-hot-toast';\nexport class ApiError extends Error {\n  constructor(message, status, code, data) {\n    super(message);\n    this.status = void 0;\n    this.code = void 0;\n    this.data = void 0;\n    this.name = 'ApiError';\n    this.status = status;\n    this.code = code;\n    this.data = data;\n  }\n}\nexport const handleApiError = error => {\n  if (error instanceof ApiError) {\n    return error;\n  }\n  const axiosError = error;\n  if (axiosError !== null && axiosError !== void 0 && axiosError.isAxiosError) {\n    var _axiosError$response, _axiosError$response$, _axiosError$response2, _axiosError$response3, _axiosError$response4, _axiosError$response5;\n    const message = ((_axiosError$response = axiosError.response) === null || _axiosError$response === void 0 ? void 0 : (_axiosError$response$ = _axiosError$response.data) === null || _axiosError$response$ === void 0 ? void 0 : _axiosError$response$.message) || axiosError.message;\n    const status = (_axiosError$response2 = axiosError.response) === null || _axiosError$response2 === void 0 ? void 0 : _axiosError$response2.status;\n    const code = (_axiosError$response3 = axiosError.response) === null || _axiosError$response3 === void 0 ? void 0 : (_axiosError$response4 = _axiosError$response3.data) === null || _axiosError$response4 === void 0 ? void 0 : _axiosError$response4.code;\n    const data = (_axiosError$response5 = axiosError.response) === null || _axiosError$response5 === void 0 ? void 0 : _axiosError$response5.data;\n    return new ApiError(message, status, code, data);\n  }\n  if (error instanceof Error) {\n    return new ApiError(error.message);\n  }\n  return new ApiError('An unexpected error occurred');\n};\nexport const showErrorToast = error => {\n  const apiError = handleApiError(error);\n\n  // Don't show toast for 401 errors as they're handled by the interceptor\n  if (apiError.status === 401) {\n    return;\n  }\n\n  // Don't show toast for validation errors as they should be handled in the form\n  if (apiError.status === 400 && apiError.code === 'VALIDATION_ERROR') {\n    return;\n  }\n  toast.error(apiError.message || 'An error occurred');\n};\nexport const isNetworkError = error => {\n  const axiosError = error;\n  return (axiosError === null || axiosError === void 0 ? void 0 : axiosError.isAxiosError) && !axiosError.response;\n};\nexport const isValidationError = error => {\n  const apiError = handleApiError(error);\n  return apiError.status === 400 && apiError.code === 'VALIDATION_ERROR';\n};\nexport const getValidationErrors = error => {\n  const apiError = handleApiError(error);\n  if (isValidationError(error)) {\n    var _apiError$data;\n    return ((_apiError$data = apiError.data) === null || _apiError$data === void 0 ? void 0 : _apiError$data.errors) || {};\n  }\n  return {};\n};","map":{"version":3,"names":["toast","ApiError","Error","constructor","message","status","code","data","name","handleApiError","error","axiosError","isAxiosError","_axiosError$response","_axiosError$response$","_axiosError$response2","_axiosError$response3","_axiosError$response4","_axiosError$response5","response","showErrorToast","apiError","isNetworkError","isValidationError","getValidationErrors","_apiError$data","errors"],"sources":["/Users/zacharypicard/Desktop/School/CIS 469/Final-CIS-469-Project/roommate-app/frontend/src/utils/errorHandling.ts"],"sourcesContent":["import axios from 'axios';\nimport toast from 'react-hot-toast';\n\nexport class ApiError extends Error {\n  status?: number;\n  code?: string;\n  data?: any;\n\n  constructor(message: string, status?: number, code?: string, data?: any) {\n    super(message);\n    this.name = 'ApiError';\n    this.status = status;\n    this.code = code;\n    this.data = data;\n  }\n}\n\nexport const handleApiError = (error: unknown): ApiError => {\n  if (error instanceof ApiError) {\n    return error;\n  }\n\n  const axiosError = error as any;\n  if (axiosError?.isAxiosError) {\n    const message = axiosError.response?.data?.message || axiosError.message;\n    const status = axiosError.response?.status;\n    const code = axiosError.response?.data?.code;\n    const data = axiosError.response?.data;\n\n    return new ApiError(message, status, code, data);\n  }\n\n  if (error instanceof Error) {\n    return new ApiError(error.message);\n  }\n\n  return new ApiError('An unexpected error occurred');\n};\n\nexport const showErrorToast = (error: unknown) => {\n  const apiError = handleApiError(error);\n  \n  // Don't show toast for 401 errors as they're handled by the interceptor\n  if (apiError.status === 401) {\n    return;\n  }\n\n  // Don't show toast for validation errors as they should be handled in the form\n  if (apiError.status === 400 && apiError.code === 'VALIDATION_ERROR') {\n    return;\n  }\n\n  toast.error(apiError.message || 'An error occurred');\n};\n\nexport const isNetworkError = (error: unknown): boolean => {\n  const axiosError = error as any;\n  return axiosError?.isAxiosError && !axiosError.response;\n};\n\nexport const isValidationError = (error: unknown): boolean => {\n  const apiError = handleApiError(error);\n  return apiError.status === 400 && apiError.code === 'VALIDATION_ERROR';\n};\n\nexport const getValidationErrors = (error: unknown): Record<string, string[]> => {\n  const apiError = handleApiError(error);\n  if (isValidationError(error)) {\n    return apiError.data?.errors || {};\n  }\n  return {};\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}